# Release v22.0.0-beta.5

**Release Date:** TBD
**Type:** Major Release
**Status:** Beta Testing

## Overview

Version 22.0.0-beta.5 introduces the **Azure AD B2C integration** - a new MCP server for managing B2C users via Microsoft Graph API. This release also includes improvements from previous beta iterations.

## New in beta.5

### Azure AD B2C Integration (NEW PACKAGE)

**New Package:** `@mcp-consultant-tools/azure-b2c`

A complete Azure AD B2C user management solution with granular security controls.

#### Features

- **User Management**: List, search, and get B2C user details
- **Group Operations**: List groups, view memberships, get group members
- **Password Management**: Reset passwords, force change on next login
- **User Lifecycle**: Create, update, and delete users
- **Granular Security**: Four separate flags for different write operation types

#### Tools (11)

| Tool | Description | Requires Flag |
|------|-------------|---------------|
| `b2c-list-users` | List users with pagination | - |
| `b2c-get-user` | Get user by ID or email | - |
| `b2c-search-users` | Search users by name/email | - |
| `b2c-list-groups` | List all groups | - |
| `b2c-get-user-groups` | Get user's group memberships | - |
| `b2c-get-group-members` | Get members of a group | - |
| `b2c-reset-user-password` | Set new password | `AZURE_B2C_ENABLE_PASSWORD_RESET` |
| `b2c-force-password-change` | Force change on next login | `AZURE_B2C_ENABLE_PASSWORD_RESET` |
| `b2c-create-user` | Create new local account | `AZURE_B2C_ENABLE_USER_CREATE` |
| `b2c-update-user` | Update user profile | `AZURE_B2C_ENABLE_USER_UPDATE` |
| `b2c-delete-user` | Delete user (irreversible) | `AZURE_B2C_ENABLE_USER_DELETE` |

#### Prompts (2)

| Prompt | Description |
|--------|-------------|
| `b2c-user-overview` | Formatted user profile with groups |
| `b2c-tenant-summary` | Tenant statistics |

#### Security Model

All write operations disabled by default. Enable only what you need:

```bash
AZURE_B2C_ENABLE_PASSWORD_RESET=true   # Password reset/force change
AZURE_B2C_ENABLE_USER_CREATE=true      # Create new users
AZURE_B2C_ENABLE_USER_UPDATE=true      # Update user profiles
AZURE_B2C_ENABLE_USER_DELETE=true      # Delete users (dangerous!)
```

#### Configuration

```bash
# Required
AZURE_B2C_TENANT_ID=your-tenant.onmicrosoft.com
AZURE_B2C_CLIENT_ID=your-app-client-id
AZURE_B2C_CLIENT_SECRET=your-app-secret

# Optional
AZURE_B2C_MAX_RESULTS=100
```

## Beta Testing Configuration

### Azure B2C (NEW)

```json
{
  "mcpServers": {
    "azure-b2c": {
      "command": "npx",
      "args": ["-y", "@mcp-consultant-tools/azure-b2c@beta"],
      "env": {
        "AZURE_B2C_TENANT_ID": "contoso.onmicrosoft.com",
        "AZURE_B2C_CLIENT_ID": "your-client-id",
        "AZURE_B2C_CLIENT_SECRET": "your-secret",
        "AZURE_B2C_ENABLE_PASSWORD_RESET": "true"
      }
    }
  }
}
```

### PowerPlatform Data (with Actions)

```json
{
  "mcpServers": {
    "powerplatform-data": {
      "command": "npx",
      "args": ["-y", "@mcp-consultant-tools/powerplatform-data@beta"],
      "env": {
        "POWERPLATFORM_URL": "https://yourenv.crm.dynamics.com",
        "POWERPLATFORM_CLIENT_ID": "your-client-id",
        "POWERPLATFORM_CLIENT_SECRET": "your-client-secret",
        "POWERPLATFORM_TENANT_ID": "your-tenant-id",
        "POWERPLATFORM_ENABLE_CREATE": "true",
        "POWERPLATFORM_ENABLE_UPDATE": "true",
        "POWERPLATFORM_ENABLE_DELETE": "true",
        "POWERPLATFORM_ENABLE_ACTIONS": "true"
      }
    }
  }
}
```

## Beta Testing Checklist for beta.5

### Azure B2C Integration (NEW)

- [ ] **Read-only tools (no flags)**
  - `b2c-list-users` - Lists users from B2C tenant
  - `b2c-get-user` - Get user by ID or email
  - `b2c-search-users` - Search for users by name
  - `b2c-list-groups` - Lists groups
  - `b2c-get-user-groups` - Get user's group memberships
  - `b2c-get-group-members` - Get members of a group

- [ ] **Password operations (with AZURE_B2C_ENABLE_PASSWORD_RESET=true)**
  - `b2c-reset-user-password` - Reset password to new value
  - `b2c-force-password-change` - Force change on next login
  - Verify operation fails when flag is false

- [ ] **User creation (with AZURE_B2C_ENABLE_USER_CREATE=true)**
  - `b2c-create-user` - Create new local account
  - Verify operation fails when flag is false

- [ ] **User update (with AZURE_B2C_ENABLE_USER_UPDATE=true)**
  - `b2c-update-user` - Update user profile
  - Verify operation fails when flag is false

- [ ] **User deletion (with AZURE_B2C_ENABLE_USER_DELETE=true)**
  - `b2c-delete-user` - Delete test user (use test account!)
  - Verify operation fails when flag is false

- [ ] **Prompts**
  - `b2c-user-overview` - Formatted user profile
  - `b2c-tenant-summary` - Tenant statistics

### Execute Action Tool (from beta.4)

- [ ] **Unbound action - WhoAmI**
- [ ] **Bound action** (if applicable)
- [ ] **Permission denied without flag**

## Previous Beta Changes

See previous release notes for:
- [v22.0.0-beta.4](v22.0.0-beta.4.md) - PowerPlatform Execute Action tool
- [v22.0.0-beta.3](v22.0.0-beta.3.md) - Azure SQL anti-guessing improvements
- [v22.0.0-beta.1](v22.0.0-beta.1.md) - REST API Integration, Azure SQL zero-discovery

## Support

Report issues at: https://github.com/klemensms/mcp-consultant-tools/issues
